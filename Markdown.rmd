---
title: "‚òï Coffee Vicscha: An√°lisis de Consumo y Estrategias de Rentabilidad"
author: "Victoria D√≠az y Schantal Guti√©rrez"
date: "`r format(Sys.Date(), '%d de %B de %Y')`"
output:
  html_document:
    theme: united
    toc: true
    toc_float: true
    number_sections: true
    highlight: espresso
    df_print: paged
    css: "cafe_style.css"
---
```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, warning = FALSE, message = FALSE)
```

```{r librerys, echo=FALSE}
library(ggplot2)
library(dplyr)
library(readxl)
library(lubridate)
library(scales)

```




El √©xito operativo y comercial de una cadena de cafeter√≠as como 'VICSHA'  se encuentra en la capacidad de comprender y anticipar ciertos aspectos o  patrones de consumo de nuestros clientes. Comprendiendo que cada una de las transacciones registradas en sus m√∫ltiples sedes es una valiosa pieza de informaci√≥n que, al ser analizada, permite tomar decisiones estrat√©gicas de alto impacto para la franquicia. Este an√°lisis se sumerge en los datos de ventas de vicsha para entender qu√© impulsa el consumo, cu√°ndo ocurre y c√≥mo optimizarlo.

##  Planteamiento del problema

El √©xito operativo y comercial de una cadena de cafeter√≠as como 'VICSHA'  se encuentra en la capacidad de comprender y anticipar ciertos aspectos o  patrones de consumo de nuestros clientes. Comprendiendo que cada una de las transacciones registradas en sus m√∫ltiples sedes es una valiosa pieza de informaci√≥n que, al ser analizada, permite tomar decisiones estrat√©gicas de alto impacto para la franquicia. Este an√°lisis se sumerge en los datos de ventas de vicsha para entender qu√© impulsa el consumo, cu√°ndo ocurre y c√≥mo optimizarlo.

Este informe esta enfocado en realizar un An√°lisis Exploratorio de Datos del conjunto de datos de ventas de 'VICSHA'. Nuestro objetivo principal es convertir los datos brutos de transacciones en informaci√≥n pr√°ctica y √∫til para la toma de decisiones y asi poder optimizar la oferta de productos, gestionar el inventario y mejorar la rentabilidad en cada punto de venta.

Nos haremos preguntas sencillas para determinar puntos claves para el desarrollo y mejora de la compa√±√≠a preguntadonos, ¬øc√≥mo puede una cafeter√≠a identificar sus productos estrella, sus horarios m√°s rentables y sus oportunidades de mejora? para asi saber que  patrones de consumo revelan los datos y c√≥mo pueden traducirse en decisiones estrat√©gicas?

## üéØ Objetivos del estudio

### ‚úÖ Objetivo general

Analizar el comportamiento de consumo en la franquicia *VICSHA* a partir de datos reales de ventas, con el fin de identificar patrones de rentabilidad, segmentaci√≥n temporal y oportunidades estrat√©gicas para mejorar la eficiencia operativa y comercial.

### üìå Objetivos espec√≠ficos

- Identificar los productos con mayor impacto en los ingresos totales.
- Analizar la variaci√≥n del consumo seg√∫n categor√≠a de producto.
- Detectar franjas horarias y d√≠as clave que concentran el flujo de ventas.
- Construir visualizaciones limpias y narrativas t√©cnicas que faciliten la interpretaci√≥n de los hallazgos.
- Proponer estrategias basadas en evidencia para optimizar la oferta, reforzar la operaci√≥n y mejorar la experiencia del cliente.

## üìö Marco Te√≥rico

Este estudio esta basado en la estad√≠stica descriptiva, con el objetivo de identificar patrones transaccionales que permitan tomar decisiones estrat√©gicas en la franquicia VICSHA.

Para ello empleamos :

‚Ä¢ 	Medidas de tendencia central :  media, mediana, moda para caracterizar el ticket promedio.

‚Ä¢ 	Medidas de dispersi√≥n : desviaci√≥n est√°ndar, rango, cuartiles y desviaci√≥n respecto a la mediana para evaluar la variabilidad en los ingresos.

‚Ä¢ 	Segmentaci√≥n temporal: agrupaci√≥n por mes y por turno horario para detectar ciclos de consumo.

‚Ä¢ 	Agrupamiento por categor√≠a y ubicaci√≥n: para comparar desempe√±o entre sucursales y tipos de producto.

## üß™ Marco Metodol√≥gico

### Enfoque y Tipo de Investigaci√≥n

El estudio tiene un enfoque cuantitativo descriptivo-exploratorio, el cual orientamos a identificar patrones de consumo para asi buscar y  generar conocimiento accionable a partir de datos reales.

### Fuente de Datos

Los datos provienen del archivo  "Coffee Shop Sales.xlsx" , que contiene registros de transacciones realizadas en distintas sucursales de VICSHA. Las variables incluyen:  Identificadores como variables temporales, variables de consumo y Variables derivadas

### Procesamiento de Datos

Para hacer mas comprensible el analisis de datos aplicamos las siguientes transformaciones para mejorar la legibilidad del analisis: 

‚Ä¢ Renombramiento de variables con nombres sem√°nticos : usamos  rename()  para dar nombres claros a las variables (- transaction_id  ‚Üí  id_transaccion, etc.).
 
 Variables derivadas:
 
- total_ingresos: producto entre cantidad y precio unitario.

- mes_abreviado: extra√≠do de la fecha (%b) y convertido a may√∫sculas.

- hora: extra√≠da de la hora de transacci√≥n.

- turno: clasificado con case_when() seg√∫n la hora (ma√±ana, tarde/noche, noche).

‚Ä¢ Conversi√≥n de formatos: transformamos transaction_time a tipo datetime con ymd_hms().

Este procesamiento se hizo para poder segmentar los datos por mes, turno, sucursal y categor√≠a de producto, facilitando el an√°lisis.

### Limpieza de Datos

Lo primero que se realizo fue verificar los valores nulos por variable usando colSums() y colMeans() para contar y calcular el porcentaje de nulos por variable y generamos un gr√°fico con ggplot2 para visualizar qu√© variables tienen nulos (rojo) y cu√°les est√°n completas (verde).
  
Luego verificamos los valores extremos revisando con summary() los rangos de precios y cantidades, y asi detectamos si hab√≠a precios o cantidades menores o iguales a cero.

Y por ultimo hicimos la validaci√≥n estructural donde confirmamos que las variables est√©n correctamente tipadas (chr, num, POSIXct) y documentamos los cambios en una tabla con kableExtra, indicando qu√© variables que se modificaron y por qu√©.


###  An√°lisis Estad√≠stico

El an√°lisis estad√≠stico se llev√≥ a cabo de manera integral, estructurando los c√°lculos por Sucursal (donde se analizaron el total de transacciones, ingresos y medidas de dispersi√≥n), por Categor√≠a de producto (enfoc√°ndose en el conteo, ingresos y estad√≠sticos descriptivos), por Mes (examinando el comportamiento mensual y el coeficiente de variaci√≥n) y por Turno horario (mediante un an√°lisis detallado por franja de consumo). Adem√°s, para una evaluaci√≥n m√°s granular, se aplic√≥ este mismo esquema anal√≠tico de forma individual a cada tienda espec√≠fica: Astoria, Lower Manhattan y Hell‚Äôs Kitchen.

## üìà Resultados y An√°lisis

El an√°lisis lo representaremos en cuatro niveles: por sucursal, por categor√≠a de producto, por mes y por turno horario. Empleamos medidas estad√≠sticas descriptivas y visualizaciones limpias para identificar patrones de consumo y oportunidades estrat√©gicas.

### üü´ An√°lisis por Sucursal


Este an√°lisis de distribuci√≥n de ingresos por sucursal la realizamoscon el prop√≥sito de identificar los patrones de consumo espec√≠ficos de cada ubicaci√≥n y detectar oportunidades estrat√©gicas de crecimiento para la cadena V√≠csha. La necesidad de este estudio surgi√≥ de la premisa de que cada sucursal opera en un contexto geogr√°fico y demogr√°fico diferente, lo que probablemente genera comportamientos de compra distintivos entre sus clientes, y asi determinamos que estas diferencias nos permite desarrollar estrategias comercializadas que maximicen el potencial de cada localizaci√≥n, optimicen la asignaci√≥n de recursos y mejoren la rentabilidad general del negocio.


Se opto por un enfoque metodol√≥gico que emplea gr√°ficos de viol√≠n y boxplots de manera conjunta ya que esta elecci√≥n de visualizaci√≥n proporciona una visi√≥n completa de la distribuci√≥n de los datos.


Los gr√°ficos de viol√≠n ilustran la densidad de las transacciones, lo que nos permite identificar los rangos de precio donde se concentra el mayor volumen de ventas. Por su parte, los boxplots superpuestos ofrecen m√©tricas estad√≠sticas esenciales: la mediana, los cuartiles y los valores at√≠picos y asi al combinar ambas herramientas, podemos ir m√°s all√° del simple valor t√≠pico de una transacci√≥n por sucursal. Logramos comprender tanto la variabilidad como la forma completa de la distribuci√≥n de ingresos.

---
```{r analiis previo , echo=FALSE}
data_coffe <- read_excel("C:/Users/schan/Downloads/Coffee Shop Sales.xlsx")

vicsha_basededatos <- data_coffe %>%
  rename(
    id_transaccion = transaction_id,
    fecha_de_transaccion = transaction_date,
    hora_de_transaccion = transaction_time,
    cantidad_vendida = transaction_qty,
    id_tienda = store_id,
    ubicacion_tienda = store_location,
    id_producto = product_id,
    precio_unitario = unit_price,
    categoria_producto = product_category,
    tipo_de_producto = product_type,
    detalles_del_producto = product_detail
  ) %>%
  mutate(
    total_ingresos = cantidad_vendida * precio_unitario
  )
```

```{r grafico_1, echo=FALSE}

ggplot(vicsha_basededatos, aes(x = ubicacion_tienda, y = total_ingresos)) +
  geom_violin(fill = "#69b3a2", alpha = 0.7, trim = TRUE) +
  geom_boxplot(width = 0.2, alpha = 0.8, fill = "white", outlier.size = 1) +
  coord_cartesian(ylim = c(0, quantile(vicsha_basededatos$total_ingresos, 0.95))) + 
  labs(
    title = "Distribuci√≥n de Ingresos por Sucursal",
    x = "Sucursal",
    y = "Total de Ingresos por Transacci√≥n"
  ) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```

---


#### RESULTADOS DETALLADOS POR SUCURSAL

ASTORIA - Clientes Consistentes

La distribuci√≥n muestra ventas concentradas en montos medios-bajos, con una mediana alrededor de $50-60. La forma del viol√≠n es estrecha y alta, indicando que la mayor√≠a de las transacciones caen dentro de un rango similar. Hay poca variabilidad en los montos, lo que sugiere que los clientes tienen h√°bitos de compra regulares y predecibles. Los valores at√≠picos son m√≠nimos, confirmando la consistencia en el comportamiento del cliente. Esta sucursal se caracteriza por transacciones estables pero con poco potencial para ventas de alto valor.

HELL'S KITCHEN - Equilibrio Diversificado

Presenta una distribuci√≥n m√°s amplia y balanceada, con mediana alrededor de $70-80. El viol√≠n tiene forma sim√©trica, mostrando una mezcla saludable de transacciones peque√±as, medianas y algunas grandes. La variabilidad moderada indica que atiende a diferentes tipos de clientes, posiblemente combinando residentes locales con visitantes. Hay algunos valores at√≠picos en ambos extremos, pero nada extremo. Esta ubicaci√≥n muestra el mejor balance entre volumen y valor por transacci√≥n.

LOWER MANHATTAN - Oportunidad Premium

La distribuci√≥n es la m√°s amplia de las tres, con mediana alrededor de $80-90 pero con una densidad que se extiende hacia valores significativamente m√°s altos. La forma del viol√≠n sugiere posiblemente dos grupos de clientes: uno de transacciones r√°pidas y otro de compras m√°s sustanciales. La alta variabilidad refleja la naturaleza diversa de esta zona financiera, donde coexisten trabajadores que buscan conveniencia con ejecutivos que realizan compras corporativas. Los valores at√≠picos hacia el extremo superior representan oportunidades significativas para ventas de mayor valor.


### üü´ An√°lisis por categoria de producto 

Este an√°lisis de categor√≠as de producto se realiz√≥ como complemento estrat√©gico al an√°lisis previo por sucursal, con el objetivo fundamental de descubrir los patrones de consumo espec√≠ficos por tipo de producto y c√≥mo estos interact√∫an con las diferentes ubicaciones geogr√°ficas.

Mientras el an√°lisis por sucursal nos mostr√≥ d√≥nde se generan los ingresos, este an√°lisis por categor√≠a nos revelar√° qu√© productos est√°n impulsando ese desempe√±o y por qu√© existen diferencias en la aceptaci√≥n de cada categor√≠a seg√∫n la ubicaci√≥n.

Seleccionamos el mapa de calor como herramienta visual principal porque permite identificar de manera inmediata:

- Sinergias naturales entre tipos de productos y ubicaciones espec√≠ficas

- Oportunidades de crecimiento en categor√≠as subutilizadas

- Patrones geogr√°ficos en las preferencias de consumo

- Estrategias de surtido personalizadas por sucursal

---

```{r grafico_categorias_Mapa de Calor, echo=FALSE}

vicsha_basededatos %>%
  group_by(ubicacion_tienda, categoria_producto) %>%
  summarise(ingresos_totales = sum(total_ingresos)) %>%
  ggplot(aes(x = ubicacion_tienda, y = categoria_producto, fill = ingresos_totales)) +
  geom_tile(color = "white", size = 0.8, alpha = 0.9) +
  geom_text(aes(label = scales::dollar(ingresos_totales, scale = 1e-3, suffix = "K")), 
            color = "white", size = 3.2, fontface = "bold") +
  scale_fill_gradientn(
    colors = c("#2c3e50", "#3498db", "#1abc9c", "#f1c40f", "#e74c3c"),
    
    name = "Ingresos Totales",
    labels = scales::dollar_format(scale = 1e-3, suffix = "K")
  ) +
  labs(
    title = "‚òï AN√ÅLISIS ESTRAT√âGICO: Ingresos por Sucursal y Categor√≠a",
    subtitle = "Mapa de Calor - Visualizaci√≥n de Oportunidades",
    x = "SUCURSAL",
    y = "CATEGOR√çA DE PRODUCTO"
  ) +
  theme_minimal() +
  theme(
    axis.text.x = element_text(angle = 45, hjust = 1, size = 11, face = "bold"),
    axis.text.y = element_text(size = 10, face = "bold"),
    plot.title = element_text(size = 14, face = "bold", hjust = 0.5),
    plot.subtitle = element_text(size = 11, hjust = 0.5),
    legend.position = "right",
    panel.grid = element_blank()
  )
```

---

El an√°lisis de las categor√≠as de producto revela patrones muy claros en el comportamiento de los clientes seg√∫n su ubicaci√≥n geogr√°fica. El caf√© se mantiene como el producto indiscutiblemente principal en las tres sucursales, generando ingresos extraordinariamente consistentes que oscilan entre los 89 y 91 mil d√≥lares en cada ubicaci√≥n. Esta uniformidad demuestra que sin importar la zona, los clientes acuden a V√≠csha principalmente por su caf√©, confirmando que esta es la columna vertebral del negocio y el producto que define la experiencia del cliente.

La panader√≠a emerge como el complemento perfecto al caf√©, mostrando un desempe√±o s√≥lido en todas las ubicaciones con ingresos entre 26 y 28 mil d√≥lares. Lower Manhattan lidera ligeramente esta categor√≠a, sugiriendo que los clientes de zonas m√°s comerciales tienen mayor tendencia a complementar su bebida con un producto de panader√≠a. Lo interesante es que esta categor√≠a mantiene una performance estable, indicando que se ha consolidado como el acompa√±amiento natural del caf√© en la mente del consumidor.

Las diferencias m√°s significativas aparecen en categor√≠as especializadas como los granos de caf√© y los productos de marca. Hell's Kitchen domina abrumadoramente la venta de granos de caf√© con 18.6 mil d√≥lares, casi el doble que las otras sucursales. Esto revela que esta ubicaci√≥n atrae a un tipo de cliente m√°s conocedor, interesado en preparar caf√© en casa, mientras que las otras sucursales tienen clientes m√°s orientados al consumo inmediato. Por otro lado, los productos de marca muestran una brecha dram√°tica: Lower Manhattan genera 6.2 mil d√≥lares mientras Hell's Kitchen apenas alcanza 1.9 mil d√≥lares, indicando que la disposici√≥n a pagar por productos premium est√° directamente vinculada al poder adquisitivo de la zona.

El chocolate para beber se ha convertido en la especialidad de Astoria, donde genera 26.3 mil d√≥lares, significativamente m√°s que en las otras ubicaciones. Esto sugiere que esta categor√≠a ha logrado un posicionamiento cultural espec√≠fico en esa comunidad, posiblemente asociado con tradiciones locales o preferencias estacionales. Mientras tanto, los sabores especializados muestran una progresi√≥n geogr√°fica clara que va aumentando desde Astoria hasta Lower Manhattan, indicando que los gustos m√°s sofisticados se concentran en √°reas m√°s urbanizadas y comerciales.

Estos hallazgos pintan un panorama claro: cada sucursal ha desarrollado un perfil de cliente distinto con preferencias espec√≠ficas. Lower Manhattan atrae clientes orientados al premium y la experiencia gourmet, Hell's Kitchen atrae conocedores del caf√© que valoran la autenticidad, y Astoria mantiene una base de clientes leales con gustos m√°s tradicionales. Esta comprensi√≥n permite dise√±ar estrategias de surtido y marketing altamente personalizadas que maximicen el potencial de cada ubicaci√≥n.
